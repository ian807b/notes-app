{"ast":null,"code":"import { animate, query, stagger, style, transition, trigger } from '@angular/animations';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/notes.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../note-card/note-card.component\";\nconst _c0 = [\"filterInput\"];\nfunction NotesListComponent_app_note_card_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-note-card\", 9);\n    i0.ɵɵlistener(\"delete\", function NotesListComponent_app_note_card_7_Template_app_note_card_delete_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const note_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.deleteNote(note_r2));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const note_r2 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"link\", ctx_r1.generateNoteURL(note_r2).toString())(\"@itemAnim\", undefined)(\"title\", note_r2.title)(\"body\", note_r2.body);\n  }\n}\nexport class NotesListComponent {\n  constructor(notesService) {\n    this.notesService = notesService;\n    this.notes = new Array();\n    this.filteredNotes = new Array();\n  }\n  ngOnInit() {\n    this.notes = this.notesService.getAll();\n    // this.filteredNotes = this.notesService.getAll();\n    this.filter(' ');\n  }\n  deleteNote(note) {\n    let noteId = this.notesService.getId(note);\n    this.notesService.delete(noteId);\n    this.filter(this.filterInputElRef.nativeElement.value);\n  }\n  generateNoteURL(note) {\n    let noteId = this.notesService.getId(note);\n    return noteId;\n  }\n  filter(query) {\n    query = query.toLowerCase().trim();\n    let allResults = new Array();\n    let terms = query.split(' ');\n    terms = this.removeDuplicates(terms);\n    terms.forEach(term => {\n      let results = this.relevantNotes(term);\n      allResults = [...allResults, ...results];\n    });\n    let uniqueResults = this.removeDuplicates(allResults);\n    this.filteredNotes = uniqueResults;\n    this.sortByRelevancy(allResults);\n  }\n  removeDuplicates(arr) {\n    let uniqueResults = new Set();\n    arr.forEach(e => uniqueResults.add(e));\n    return Array.from(uniqueResults);\n  }\n  relevantNotes(query) {\n    query = query.toLowerCase().trim();\n    let relevantNotes = this.notes.filter(note => {\n      if (note.title && note.title.toLowerCase().includes(query)) {\n        return true;\n      }\n      if (note.body && note.body.toLowerCase().includes(query)) {\n        return true;\n      }\n      return false;\n    });\n    return relevantNotes;\n  }\n  sortByRelevancy(searchResults) {\n    let noteCountObj = {};\n    searchResults.forEach(note => {\n      let noteId = this.notesService.getId(note);\n      if (noteCountObj[noteId]) {\n        noteCountObj[noteId] += 1;\n      } else {\n        noteCountObj[noteId] = 1;\n      }\n    });\n    this.filteredNotes = this.filteredNotes.sort((a, b) => {\n      let aId = this.notesService.getId(a);\n      let bId = this.notesService.getId(b);\n      let aCount = noteCountObj[aId];\n      let bCount = noteCountObj[bId];\n      return bCount - aCount;\n    });\n  }\n}\nNotesListComponent.ɵfac = function NotesListComponent_Factory(t) {\n  return new (t || NotesListComponent)(i0.ɵɵdirectiveInject(i1.NotesService));\n};\nNotesListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NotesListComponent,\n  selectors: [[\"app-notes-list\"]],\n  viewQuery: function NotesListComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.filterInputElRef = _t.first);\n    }\n  },\n  decls: 10,\n  vars: 2,\n  consts: [[1, \"main-container\"], [1, \"search-bar-container\"], [1, \"field\"], [1, \"control\", \"has-icons-left\"], [\"id\", \"filter\", \"type\", \"text\", \"placeholder\", \"Filter\", 1, \"input\", 3, \"keyup\"], [\"filterInput\", \"\"], [1, \"notes-list\"], [3, \"link\", \"title\", \"body\", \"delete\", 4, \"ngFor\", \"ngForOf\"], [\"routerLink\", \"new\", 1, \"button\", \"floating-add-button\", \"is-primary\"], [3, \"link\", \"title\", \"body\", \"delete\"]],\n  template: function NotesListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"p\", 3)(4, \"input\", 4, 5);\n      i0.ɵɵlistener(\"keyup\", function NotesListComponent_Template_input_keyup_4_listener($event) {\n        return ctx.filter($event.target.value);\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(6, \"div\", 6);\n      i0.ɵɵtemplate(7, NotesListComponent_app_note_card_7_Template, 1, 4, \"app-note-card\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"button\", 8);\n      i0.ɵɵtext(9, \" + Add \");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"@listAnim\", undefined);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.filteredNotes);\n    }\n  },\n  dependencies: [i2.NgForOf, i3.RouterLink, i4.NoteCardComponent],\n  styles: [\"@import url(https://fonts.googleapis.com/css?family=Nunito:400,700);html[_ngcontent-%COMP%], body[_ngcontent-%COMP%] {\\n  height: 100%;\\n  font-size: 18px !important;\\n  overflow: hidden !important;\\n}\\n\\n.main-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: column;\\n  max-width: 500px;\\n  margin: auto;\\n}\\n\\n.notes-list[_ngcontent-%COMP%] {\\n  margin-top: 35px;\\n  margin-bottom: 70px;\\n}\\n\\napp-note-card[_ngcontent-%COMP%] {\\n  display: block;\\n  margin-bottom: 25px;\\n}\\n\\n.floating-add-button[_ngcontent-%COMP%] {\\n  position: fixed;\\n  bottom: 0;\\n  width: 500px;\\n  border-radius: 0;\\n  box-shadow: 0px 0px 15px 5px rgba(165, 154, 215, 0.2);\\n  height: 50px;\\n  font-size: 24px;\\n}\\n\\n#filter[_ngcontent-%COMP%] {\\n  display: none;\\n  color: white;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluLXN0eWxlLnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi8uLi8uLi8uLi9TcHJpbmclMjAyMDIzL0NNUFQlMjAzNzIvQXNzaWdubWVudC9Bc3NpZ25tZW50JTIwMy9ub3Rlcy1hcHAvc3JjL2FwcC9wYWdlcy9ub3Rlcy1saXN0L25vdGVzLWxpc3QuY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvYXBwL3BhZ2VzL25vdGVzLWxpc3Qvbm90ZXMtbGlzdC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE4QkE7O0VBRUUsWUFBQTtFQUdBLDBCQUFBO0VBQ0EsMkJBQUE7QUM5QkY7O0FDSkE7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7RUFDQSxnQkFBQTtFQUNBLFlBQUE7QURPRjs7QUNIQTtFQUNFLGdCQUFBO0VBQ0EsbUJBQUE7QURNRjs7QUNIQTtFQUNFLGNBQUE7RUFDQSxtQkFBQTtBRE1GOztBQ0hBO0VBQ0UsZUFBQTtFQUNBLFNBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7RUFDQSxxREFBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0FETUY7O0FDSEE7RUFDRSxhQUFBO0VBQ0EsWUFBQTtBRE1GIiwic291cmNlc0NvbnRlbnQiOlsiLy8gQ2hhbmdpbmcgYnVsbWEgdmFyaWFibGVzIGFuZCBhZGRpbmcgZ2xvYmFsIHN0eWxlc1xuXG5AY2hhcnNldCBcInV0Zi04XCI7XG5cbi8vIEltcG9ydCBhIEdvb2dsZSBGb250XG5AaW1wb3J0IHVybCgnaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3M/ZmFtaWx5PU51bml0bzo0MDAsNzAwJyk7XG5cbi8vIFNldCB5b3VyIGJyYW5kIGNvbG9yc1xuJHB1cnBsZTogI2E1OWFkNztcbiRwaW5rOiAjZmU3NmMyO1xuJGJsdWU6ICMzN2M3ZjI7XG4kbGlnaHQtcmVkOiAjZmZmM2YzO1xuJGxpZ2h0OiAjZmFmY2ZmO1xuJGdyZWVuOiAjMGJmMzg3O1xuLy8gJHJlZDogI2NjMDYzMztcbiRyZWQ6ICNhNjE5MmU7XG5cbi8vIFVwZGF0ZSBCdWxtYSdzIGdsb2JhbCB2YXJpYWJsZXNcbiRmYW1pbHktc2Fucy1zZXJpZjogJ051bml0bycsIHNhbnMtc2VyaWY7XG4kcHJpbWFyeTogJGJsdWU7XG4kbGluazogJGJsdWU7XG5cbi8vIFVwZGF0ZSBzb21lIG9mIEJ1bG1hJ3MgY29tcG9uZW50IHZhcmlhYmxlc1xuJGJvZHktYmFja2dyb3VuZC1jb2xvcjogJGxpZ2h0O1xuJGNvbnRyb2wtYm9yZGVyLXdpZHRoOiAycHg7XG4kaW5wdXQtYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDtcbiRpbnB1dC1iYWNrZ3JvdW5kLWNvbG9yOiAjZjNmNWZhO1xuJGlucHV0LXNoYWRvdzogbm9uZTtcblxuLy8gR0xPQkFMIFNUWUxFU1xuaHRtbCxcbmJvZHkge1xuICBoZWlnaHQ6IDEwMCU7XG5cbiAgLy8gU2V0IHRoZSBkZWZhdWx0IGZvbnQgc2l6ZSB0byAxOHB4XG4gIGZvbnQtc2l6ZTogMThweCAhaW1wb3J0YW50O1xuICBvdmVyZmxvdzogaGlkZGVuICFpbXBvcnRhbnQ7XG59XG4iLCJAaW1wb3J0IHVybChcImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1OdW5pdG86NDAwLDcwMFwiKTtcbmh0bWwsXG5ib2R5IHtcbiAgaGVpZ2h0OiAxMDAlO1xuICBmb250LXNpemU6IDE4cHggIWltcG9ydGFudDtcbiAgb3ZlcmZsb3c6IGhpZGRlbiAhaW1wb3J0YW50O1xufVxuXG4ubWFpbi1jb250YWluZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBtYXgtd2lkdGg6IDUwMHB4O1xuICBtYXJnaW46IGF1dG87XG59XG5cbi5ub3Rlcy1saXN0IHtcbiAgbWFyZ2luLXRvcDogMzVweDtcbiAgbWFyZ2luLWJvdHRvbTogNzBweDtcbn1cblxuYXBwLW5vdGUtY2FyZCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW4tYm90dG9tOiAyNXB4O1xufVxuXG4uZmxvYXRpbmctYWRkLWJ1dHRvbiB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgYm90dG9tOiAwO1xuICB3aWR0aDogNTAwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDA7XG4gIGJveC1zaGFkb3c6IDBweCAwcHggMTVweCA1cHggcmdiYSgxNjUsIDE1NCwgMjE1LCAwLjIpO1xuICBoZWlnaHQ6IDUwcHg7XG4gIGZvbnQtc2l6ZTogMjRweDtcbn1cblxuI2ZpbHRlciB7XG4gIGRpc3BsYXk6IG5vbmU7XG4gIGNvbG9yOiB3aGl0ZTtcbn0iLCJAaW1wb3J0ICcuLi8uLi8uLi9tYWluLXN0eWxlLnNjc3MnO1xuXG4ubWFpbi1jb250YWluZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBtYXgtd2lkdGg6IDUwMHB4O1xuICBtYXJnaW46IGF1dG87XG4gIC8vIHBhZGRpbmctdG9wOiAxMHB4O1xufVxuXG4ubm90ZXMtbGlzdCB7XG4gIG1hcmdpbi10b3A6IDM1cHg7XG4gIG1hcmdpbi1ib3R0b206IDcwcHg7XG59XG5cbmFwcC1ub3RlLWNhcmQge1xuICBkaXNwbGF5OiBibG9jaztcbiAgbWFyZ2luLWJvdHRvbTogMjVweDtcbn1cblxuLmZsb2F0aW5nLWFkZC1idXR0b24ge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIGJvdHRvbTogMDtcbiAgd2lkdGg6IDUwMHB4O1xuICBib3JkZXItcmFkaXVzOiAwO1xuICBib3gtc2hhZG93OiAwcHggMHB4IDE1cHggNXB4IHJnYmEoJHB1cnBsZSwgMC4yKTtcbiAgaGVpZ2h0OiA1MHB4O1xuICBmb250LXNpemU6IDI0cHg7XG59XG5cbiNmaWx0ZXIge1xuICBkaXNwbGF5OiBub25lO1xuICBjb2xvcjogd2hpdGU7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"],\n  data: {\n    animation: [trigger('itemAnim', [transition('void => *', [style({\n      height: 0,\n      opacity: 0,\n      transform: 'scale(0.85)',\n      'margin-bottom': 0,\n      paddingTop: 0,\n      paddingBottom: 0,\n      paddingRight: 0,\n      paddingLeft: 0\n    }), animate('50ms', style({\n      height: '*',\n      'margin-bottom': '*',\n      paddingTop: '*',\n      paddingBottom: '*',\n      paddingLeft: '*',\n      paddingRight: '*'\n    })), animate(68)]), transition('* => void', [animate(50, style({\n      transform: 'scale(1.05)'\n    })), animate(50, style({\n      transform: 'scale(1)',\n      opacity: 0.75\n    })), animate('120ms ease-out', style({\n      transform: 'scale(0.68)',\n      opacity: 0\n    })), animate('150ms ease-out', style({\n      height: 0,\n      paddingTop: 0,\n      paddingBottom: 0,\n      paddingLeft: 0,\n      paddingRight: 0,\n      'margin-bottom': '0'\n    }))])]), trigger('listAnim', [transition('* => *', [query(':enter', [style({\n      opacity: 0,\n      height: 0\n    }), stagger(100, [animate('0.2s ease')])], {\n      optional: true\n    })])])]\n  }\n});","map":{"version":3,"mappings":"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","names":["animate","query","stagger","style","transition","trigger","i0","NotesListComponent","constructor","notesService","Array","ngOnInit","notes","getAll","filter","deleteNote","note","noteId","getId","delete","filterInputElRef","nativeElement","value","generateNoteURL","toLowerCase","trim","allResults","terms","split","removeDuplicates","forEach","term","results","relevantNotes","uniqueResults","filteredNotes","sortByRelevancy","arr","Set","e","add","from","title","includes","body","searchResults","noteCountObj","sort","a","b","aId","bId","aCount","bCount","selectors","viewQuery","ctx","height","opacity","transform","paddingTop","paddingBottom","paddingRight","paddingLeft","optional"],"sourceRoot":"","sources":["/Users/ianh/Documents/SFU/Spring 2023/CMPT 372/Assignment/Assignment 3/notes-app/src/app/pages/notes-list/notes-list.component.ts","/Users/ianh/Documents/SFU/Spring 2023/CMPT 372/Assignment/Assignment 3/notes-app/src/app/pages/notes-list/notes-list.component.html"],"sourcesContent":["import {\n  animate,\n  query,\n  stagger,\n  style,\n  transition,\n  trigger,\n} from '@angular/animations';\nimport { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { Note } from 'src/app/shared/note.model';\nimport { NotesService } from 'src/app/shared/notes.service';\n\n@Component({\n  selector: 'app-notes-list',\n  templateUrl: './notes-list.component.html',\n  styleUrls: ['./notes-list.component.scss'],\n  animations: [\n    trigger('itemAnim', [\n      transition('void => *', [\n        style({\n          height: 0,\n          opacity: 0,\n          transform: 'scale(0.85)',\n          'margin-bottom': 0,\n          paddingTop: 0,\n          paddingBottom: 0,\n          paddingRight: 0,\n          paddingLeft: 0,\n        }),\n        animate(\n          '50ms',\n          style({\n            height: '*',\n            'margin-bottom': '*',\n            paddingTop: '*',\n            paddingBottom: '*',\n            paddingLeft: '*',\n            paddingRight: '*',\n          })\n        ),\n        animate(68),\n      ]),\n      transition('* => void', [\n        animate(\n          50,\n          style({\n            transform: 'scale(1.05)',\n          })\n        ),\n        animate(\n          50,\n          style({\n            transform: 'scale(1)',\n            opacity: 0.75,\n          })\n        ),\n        animate(\n          '120ms ease-out',\n          style({\n            transform: 'scale(0.68)',\n            opacity: 0,\n          })\n        ),\n        animate(\n          '150ms ease-out',\n          style({\n            height: 0,\n            paddingTop: 0,\n            paddingBottom: 0,\n            paddingLeft: 0,\n            paddingRight: 0,\n            'margin-bottom': '0',\n          })\n        ),\n      ]),\n    ]),\n    trigger('listAnim', [\n      transition('* => *', [\n        query(\n          ':enter',\n          [\n            style({\n              opacity: 0,\n              height: 0,\n            }),\n            stagger(100, [animate('0.2s ease')]),\n          ],\n          { optional: true }\n        ),\n      ]),\n    ]),\n  ],\n})\nexport class NotesListComponent implements OnInit {\n  notes: Note[] = new Array<Note>();\n  filteredNotes: Note[] = new Array<Note>();\n\n  @ViewChild('filterInput') filterInputElRef:\n    | ElementRef<HTMLInputElement>\n    | any;\n\n  constructor(private notesService: NotesService) {}\n\n  ngOnInit() {\n    this.notes = this.notesService.getAll();\n    // this.filteredNotes = this.notesService.getAll();\n    this.filter(' ');\n  }\n\n  deleteNote(note: Note) {\n    let noteId = this.notesService.getId(note);\n    this.notesService.delete(noteId);\n    this.filter(this.filterInputElRef.nativeElement.value);\n  }\n\n  generateNoteURL(note: Note) {\n    let noteId = this.notesService.getId(note);\n    return noteId;\n  }\n\n  filter(query: string) {\n    query = query.toLowerCase().trim();\n    let allResults: Note[] = new Array<Note>();\n    let terms: string[] = query.split(' ');\n    terms = this.removeDuplicates(terms);\n    terms.forEach((term) => {\n      let results: Note[] = this.relevantNotes(term);\n      allResults = [...allResults, ...results];\n    });\n\n    let uniqueResults = this.removeDuplicates(allResults);\n    this.filteredNotes = uniqueResults;\n\n    this.sortByRelevancy(allResults);\n  }\n\n  removeDuplicates(arr: Array<any>): Array<any> {\n    let uniqueResults: Set<any> = new Set<any>();\n    arr.forEach((e) => uniqueResults.add(e));\n\n    return Array.from(uniqueResults);\n  }\n\n  relevantNotes(query: string): Array<Note> {\n    query = query.toLowerCase().trim();\n    let relevantNotes = this.notes.filter((note) => {\n      if (note.title && note.title.toLowerCase().includes(query)) {\n        return true;\n      }\n      if (note.body && note.body.toLowerCase().includes(query)) {\n        return true;\n      }\n      return false;\n    });\n    return relevantNotes;\n  }\n\n  sortByRelevancy(searchResults: Note[]) {\n    let noteCountObj: any = {};\n    searchResults.forEach((note) => {\n      let noteId = this.notesService.getId(note);\n      if (noteCountObj[noteId]) {\n        noteCountObj[noteId] += 1;\n      } else {\n        noteCountObj[noteId] = 1;\n      }\n    });\n    this.filteredNotes = this.filteredNotes.sort((a: Note, b: Note) => {\n      let aId = this.notesService.getId(a);\n      let bId = this.notesService.getId(b);\n\n      let aCount = noteCountObj[aId];\n      let bCount = noteCountObj[bId];\n\n      return bCount - aCount;\n    });\n  }\n}\n","<div class=\"main-container\">\n  <div class=\"search-bar-container\">\n    <div class=\"field\">\n      <p class=\"control has-icons-left\">\n        <input\n          id=\"filter\"\n          #filterInput\n          class=\"input\"\n          type=\"text\"\n          (keyup)=\"filter($any($event.target).value)\"\n          placeholder=\"Filter\"\n        />\n        <!-- <span class=\"icon is-small is-left\">\n          <i class=\"fas fa-search\"></i>\n        </span> -->\n      </p>\n    </div>\n  </div>\n\n  <div class=\"notes-list\" [@listAnim]>\n    <app-note-card\n      *ngFor=\"let note of filteredNotes\"\n      [link]=\"generateNoteURL(note).toString()\"\n      [@itemAnim]\n      (delete)=\"deleteNote(note)\"\n      [title]=\"note.title\"\n      [body]=\"note.body\"\n    ></app-note-card>\n  </div>\n\n  <button class=\"button floating-add-button is-primary\" routerLink=\"new\">\n    + Add\n  </button>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}